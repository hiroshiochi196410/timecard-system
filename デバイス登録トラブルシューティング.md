# デバイス登録トラブルシューティングガイド

## 🔧 デバイス登録ができない場合の対処法

### ✅ チェックリスト

#### 1. ブラウザの設定確認
- [ ] **プライベートモード（シークレットモード）を使用していないか**
  - プライベートモードではLocalStorageが制限されます
  - 通常モードで開き直してください

- [ ] **Cookie・ストレージ設定が有効か**
  - ブラウザの設定 → プライバシーとセキュリティ → Cookie・ストレージを許可

- [ ] **ブラウザのバージョンが古くないか**
  - Chrome、Safari、Edgeの最新版を推奨

#### 2. 入力内容の確認
- [ ] **社員番号は4桁の半角数字か**
  - ❌ 全角数字（１２３４）
  - ❌ 空白が含まれている（12 34）
  - ✅ 半角数字4桁（1234）

- [ ] **登録されている社員番号か**
  - システムに登録されていない社員番号は使用できません
  - 管理者に確認してください

#### 3. デバイス・環境の確認
- [ ] **ストレージ容量が十分か**
  - ブラウザのキャッシュをクリアしてみてください

- [ ] **安定したネットワーク接続か**
  - Wi-Fi接続を確認してください

## 📱 改善版の新機能

### エラーメッセージが詳細に
改善前：
```
❌ 社員番号4桁を入力してください
```

改善後：
```
❌ 社員番号は4桁で入力してください（現在: 3桁）
❌ 社員番号は半角数字で入力してください
❌ データ保存機能が利用できません
```

### 問題の自動検出
システムが以下を自動でチェック：
1. LocalStorageが使用可能か
2. 入力値が正しい形式か
3. データが正常に保存されたか

### より親切なガイダンス
問題が発生した場合、具体的な解決策を表示します。

## 🆘 よくある問題と解決策

### ケース1: 「データ保存機能が利用できません」
**原因**: プライベートモード使用、またはCookie無効

**解決策**:
1. プライベートモードを終了
2. 通常のブラウザウィンドウで開く
3. ブラウザ設定でCookieを有効化

### ケース2: 「社員番号が見つかりません」
**原因**: システムに未登録の社員番号

**解決策**:
1. 社員番号が正しいか確認（4桁の半角数字）
2. 管理者に社員登録を依頼

### ケース3: 何度やっても登録できない
**原因**: ブラウザキャッシュの問題

**解決策**:
1. ブラウザのキャッシュをクリア
2. ページを再読み込み（Ctrl+Shift+R / Cmd+Shift+R）
3. 別のブラウザで試す

## 🔍 管理者向けデバッグ方法

### デバッグモードの確認
1. ブラウザのコンソールを開く（F12キー）
2. Console タブを確認
3. エラーメッセージを確認

### よく見られるエラー
```javascript
// LocalStorageが無効
"QuotaExceededError: The quota has been exceeded"

// プライベートモード
"SecurityError: The operation is insecure"

// データ保存失敗
"デバイス保存エラー: データの保存に失敗しました"
```

## 📞 サポート連絡先

問題が解決しない場合は、以下の情報を管理者に伝えてください：

1. **使用デバイス**: （例：iPhone 13、Windows PC）
2. **ブラウザ**: （例：Safari、Chrome）
3. **エラーメッセージ**: （表示された正確なメッセージ）
4. **社員番号**: （登録しようとした番号）
5. **試したこと**: （どの対処法を試したか）

---

## ✨ 改善版の主な変更点

### セキュリティとエラーハンドリング
- LocalStorage利用可能性の事前チェック
- 全角数字の自動検出
- 保存後の検証機能

### ユーザー体験
- エラーメッセージに絵文字アイコン（❌、✅）
- より具体的なガイダンス
- 問題の原因を明確に表示

### デバッグ機能
- 詳細なコンソールログ
- エラー内容の記録
- トラブルシューティング情報の提供
